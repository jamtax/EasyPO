<!DOCTYPE html>
<html lang="en-ZA">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Easy Suite — Dashboard</title>
  <meta name="description" content="Easy Suite dashboard — Quotes, Invoices, Purchase Orders, Sales Orders, Receipts, Statements, Job Cards, Payroll, Inventory, CRM." />

  <!-- Favicon (STANDARDIZED: local icon.png) -->
  <link rel="icon" href="icon.png" type="image/png" />
  <link rel="apple-touch-icon" href="icon.png" />

  <!-- TailwindCSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    .module-card { transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease; }
    .module-card:hover { transform: translateY(-3px); }
    .glass { backdrop-filter: blur(10px); background: rgba(255,255,255,.75); }
    .dark .glass { background: rgba(15,23,42,.7); }
    .dark body { background:#0b1220; color:#e5e7eb; }
    .dark .card { background:#0f172a !important; border-color: rgba(148,163,184,.18) !important; }
    .dark .text-gray-800 { color:#e5e7eb !important; }
    .dark .text-gray-600 { color:#94a3b8 !important; }
    .dark .bg-white { background:#0f172a !important; }
    .dark .bg-gray-100 { background:#0b1220 !important; }
    .dark .border-gray-200 { border-color: rgba(148,163,184,.18) !important; }
    .dark input { background:#0f172a !important; color:#e5e7eb !important; border-color: rgba(148,163,184,.18) !important; }
    .badge { font-size:.75rem; font-weight:800; padding:.2rem .55rem; border-radius:999px; }
  </style>

  <script>
    // ====== STORAGE KEYS ======
    const LS_THEME = "easySuite.theme";
    const LS_PINNED = "easySuite.pinnedModules";
    const LS_RECENT = "easySuite.recentModules";

    // ====== MODULES (single source of truth) ======
    const MODULES = [
      { id:"quote", name:"Easy Quote", href:"easy-quote.html", icon:"fa-file-lines", color:"bg-blue-100 text-blue-600", tags:["sales","pricing","customer"] , desc:"Create and manage quotes quickly, with itemised line entries and totals." },
      { id:"invoice", name:"Easy Invoice", href:"easy-invoice.html", icon:"fa-file-invoice-dollar", color:"bg-green-100 text-green-600", tags:["billing","tax","vat"], desc:"Generate professional invoices with tax, discounts and export options." },
      { id:"po", name:"Easy Purchase Order", href:"easy-purchase-order.html", icon:"fa-shopping-cart", color:"bg-purple-100 text-purple-600", tags:["procurement","supplier"], desc:"Create purchase orders for suppliers and track purchasing activity." },
      { id:"so", name:"Easy Sales Order", href:"easy-sales-order.html", icon:"fa-shopping-bag", color:"bg-yellow-100 text-yellow-700", tags:["orders","fulfillment"], desc:"Record customer orders and manage fulfilment from a single module." },
      // ✅ FIXED LINK: easy-receipt.html (not easy-reciept.html)
      { id:"receipt", name:"Easy Receipt", href:"easy-receipt.html", icon:"fa-receipt", color:"bg-teal-100 text-teal-700", tags:["payments","proof"], desc:"Issue receipts and maintain a record of payments received." },
      { id:"statement", name:"Easy Statement", href:"easy-statement.html", icon:"fa-file-contract", color:"bg-red-100 text-red-600", tags:["accounts","aging"], desc:"Generate account statements summarising transactions over a period." },
      { id:"job", name:"Easy Job Card", href:"easy-job-card.html", icon:"fa-briefcase", color:"bg-orange-100 text-orange-700", tags:["service","workshop"], desc:"Manage service jobs with tasks, materials and labour logs." },
      { id:"payroll", name:"Easy Payroll", href:"easy-payroll.html", icon:"fa-money-bill-wave", color:"bg-indigo-100 text-indigo-700", tags:["hr","payslip"], desc:"Prepare payroll summaries including earnings, deductions and net pay." },
      { id:"inventory", name:"Easy Inventory", href:"easy-inventory.html", icon:"fa-boxes-stacked", color:"bg-pink-100 text-pink-700", tags:["stock","warehouse"], desc:"Track stock levels and product information to stay organised." },
      { id:"crm", name:"Easy CRM", href:"easy-crm.html", icon:"fa-users", color:"bg-gray-100 text-gray-700", tags:["customers","pipeline"], desc:"Maintain customer relationships, contacts and follow-ups." }
    ];

    // ====== THEME ======
    function applyTheme(theme){
      document.documentElement.classList.toggle("dark", theme === "dark");
      localStorage.setItem(LS_THEME, theme);
      const btn = document.getElementById("themeBtn");
      if (btn) btn.innerHTML = theme === "dark"
        ? '<i class="fa-solid fa-sun"></i><span class="hidden sm:inline">Light</span>'
        : '<i class="fa-solid fa-moon"></i><span class="hidden sm:inline">Dark</span>';
    }
    function toggleTheme(){
      const current = localStorage.getItem(LS_THEME) || "light";
      applyTheme(current === "dark" ? "light" : "dark");
    }

    // ====== PINNED ======
    function getPinned(){
      try { return JSON.parse(localStorage.getItem(LS_PINNED) || "[]"); } catch { return []; }
    }
    function setPinned(arr){
      localStorage.setItem(LS_PINNED, JSON.stringify(arr));
    }
    function togglePinned(id){
      const pinned = new Set(getPinned());
      pinned.has(id) ? pinned.delete(id) : pinned.add(id);
      setPinned([...pinned]);
      renderAll();
    }

    // ====== RECENT ======
    function addRecent(id){
      const existing = (JSON.parse(localStorage.getItem(LS_RECENT) || "[]") || []).filter(x => x !== id);
      const updated = [id, ...existing].slice(0, 6);
      localStorage.setItem(LS_RECENT, JSON.stringify(updated));
    }
    function getRecent(){
      try { return JSON.parse(localStorage.getItem(LS_RECENT) || "[]"); } catch { return []; }
    }

    // ====== SEARCH/FILTER ======
    function filterCards(){
      const q = (document.getElementById("search")?.value || "").trim().toLowerCase();
      const activeTag = document.querySelector('[data-tag].ring-2')?.getAttribute("data-tag") || "";

      document.querySelectorAll(".module-card").forEach(card => {
        const name = (card.getAttribute("data-name") || "").toLowerCase();
        const desc = (card.getAttribute("data-desc") || "").toLowerCase();
        const tags = (card.getAttribute("data-tags") || "").toLowerCase();

        const matchText = !q || name.includes(q) || desc.includes(q) || tags.includes(q);
        const matchTag = !activeTag || tags.includes(activeTag.toLowerCase());

        card.classList.toggle("hidden", !(matchText && matchTag));
      });
    }

    // ====== RENDER ======
    function moduleCard(m){
      const pinned = new Set(getPinned());
      const isPinned = pinned.has(m.id);

      return `
        <div class="module-card bg-white rounded-lg shadow p-5 flex flex-col border border-gray-200"
             data-name="${m.name.toLowerCase()}"
             data-desc="${(m.desc||"").toLowerCase()}"
             data-tags="${m.tags.join(" ")}">

          <div class="flex items-start justify-between gap-3 mb-3">
            <div class="h-12 w-12 rounded ${m.color} flex items-center justify-center">
              <i class="fa-solid ${m.icon} fa-lg"></i>
            </div>

            <button class="px-3 py-2 rounded-lg border border-gray-200 text-sm font-extrabold hover:bg-gray-50"
                    title="${isPinned ? "Unpin" : "Pin"}"
                    onclick="togglePinned('${m.id}')">
              <i class="fa-solid ${isPinned ? "fa-thumbtack" : "fa-thumbtack"} ${isPinned ? "" : "opacity-40"}"></i>
            </button>
          </div>

          <h2 class="text-xl font-bold text-gray-800 mb-2">${m.name}</h2>
          <p class="flex-1 text-gray-600">${m.desc}</p>

          <div class="mt-3 flex flex-wrap gap-2">
            ${m.tags.map(t => `<span class="badge bg-gray-100 text-gray-700">${t}</span>`).join("")}
          </div>

          <a href="${m.href}"
             onclick="addRecent('${m.id}')"
             class="mt-4 inline-flex items-center gap-2 text-blue-600 font-extrabold hover:underline">
            Open <i class="fa-solid fa-arrow-right"></i>
          </a>
        </div>
      `;
    }

    function renderPinned(){
      const pinnedIds = getPinned();
      const list = pinnedIds.map(id => MODULES.find(m => m.id === id)).filter(Boolean);
      const el = document.getElementById("pinnedGrid");
      const wrap = document.getElementById("pinnedWrap");
      if (!el || !wrap) return;

      if (!list.length) {
        wrap.classList.add("hidden");
        return;
      }
      wrap.classList.remove("hidden");
      el.innerHTML = list.map(moduleCard).join("");
    }

    function renderRecent(){
      const recentIds = getRecent();
      const list = recentIds.map(id => MODULES.find(m => m.id === id)).filter(Boolean);
      const el = document.getElementById("recentList");
      const wrap = document.getElementById("recentWrap");
      if (!el || !wrap) return;

      if (!list.length) {
        wrap.classList.add("hidden");
        return;
      }
      wrap.classList.remove("hidden");
      el.innerHTML = list.map(m => `
        <a href="${m.href}" onclick="addRecent('${m.id}')"
           class="inline-flex items-center gap-2 px-3 py-2 rounded-lg border border-gray-200 hover:bg-gray-50 font-extrabold">
          <i class="fa-solid ${m.icon}"></i> ${m.name}
        </a>
      `).join("");
    }

    function renderAllModules(){
      const el = document.getElementById("modulesGrid");
      if (!el) return;
      el.innerHTML = MODULES.map(moduleCard).join("");
    }

    function renderTags(){
      const allTags = [...new Set(MODULES.flatMap(m => m.tags))].sort();
      const el = document.getElementById("tagBar");
      if (!el) return;

      el.innerHTML = `
        <button data-tag=""
                class="px-3 py-2 rounded-lg border border-gray-200 font-extrabold hover:bg-gray-50 ring-2 ring-blue-600"
                onclick="selectTag('')">All</button>
        ${allTags.map(t => `
          <button data-tag="${t}"
                  class="px-3 py-2 rounded-lg border border-gray-200 font-extrabold hover:bg-gray-50"
                  onclick="selectTag('${t}')">${t}</button>
        `).join("")}
      `;
    }

    function selectTag(tag){
      document.querySelectorAll("[data-tag]").forEach(b => b.classList.remove("ring-2","ring-blue-600"));
      const btn = document.querySelector(`[data-tag="${CSS.escape(tag)}"]`);
      if (btn) btn.classList.add("ring-2","ring-blue-600");
      filterCards();
    }

    function renderAll(){
      renderPinned();
      renderRecent();
      renderTags();
      renderAllModules();
      filterCards();
    }

    // ====== ONLINE/OFFLINE INDICATOR ======
    function updateOnlineBadge(){
      const badge = document.getElementById("onlineBadge");
      if (!badge) return;
      if (navigator.onLine) {
        badge.className = "badge bg-green-100 text-green-700";
        badge.innerHTML = '<i class="fa-solid fa-wifi"></i> Online';
      } else {
        badge.className = "badge bg-yellow-100 text-yellow-800";
        badge.innerHTML = '<i class="fa-solid fa-triangle-exclamation"></i> Offline';
      }
    }

    // ====== INIT ======
    window.addEventListener("DOMContentLoaded", () => {
      const theme = localStorage.getItem(LS_THEME) || "light";
      applyTheme(theme);

      renderAll();
      updateOnlineBadge();
      window.addEventListener("online", updateOnlineBadge);
      window.addEventListener("offline", updateOnlineBadge);

      // Keyboard shortcuts
      document.addEventListener("keydown", (e) => {
        if (e.key === "/" && !e.ctrlKey && !e.metaKey) {
          e.preventDefault();
          document.getElementById("search")?.focus();
        }
        if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === "k") {
          e.preventDefault();
          document.getElementById("search")?.focus();
        }
      });
    });
  </script>
</head>

<body class="bg-gray-100 min-h-screen">
  <!-- Navigation Bar -->
  <nav class="bg-blue-600 text-white py-4">
    <div class="container mx-auto px-4 flex flex-wrap items-center gap-4">
      <a href="index.html" class="font-black text-xl mr-2">Easy&nbsp;Suite</a>

      <a href="easy-quote.html" class="hover:underline" onclick="addRecent('quote')">Quote</a>
      <a href="easy-invoice.html" class="hover:underline" onclick="addRecent('invoice')">Invoice</a>
      <a href="easy-purchase-order.html" class="hover:underline" onclick="addRecent('po')">Purchase&nbsp;Order</a>
      <a href="easy-sales-order.html" class="hover:underline" onclick="addRecent('so')">Sales&nbsp;Order</a>
      <a href="easy-receipt.html" class="hover:underline" onclick="addRecent('receipt')">Receipt</a>
      <a href="easy-statement.html" class="hover:underline" onclick="addRecent('statement')">Statement</a>
      <a href="easy-job-card.html" class="hover:underline" onclick="addRecent('job')">Job&nbsp;Card</a>
      <a href="easy-payroll.html" class="hover:underline" onclick="addRecent('payroll')">Payroll</a>
      <a href="easy-inventory.html" class="hover:underline" onclick="addRecent('inventory')">Inventory</a>
      <a href="easy-crm.html" class="hover:underline" onclick="addRecent('crm')">CRM</a>

      <span class="ml-auto flex items-center gap-2">
        <span id="onlineBadge" class="badge bg-gray-100 text-gray-700"><i class="fa-solid fa-wifi"></i> Online</span>

        <button id="themeBtn" class="px-3 py-2 rounded-lg bg-white text-blue-700 font-extrabold hover:bg-blue-50"
                onclick="toggleTheme()" title="Toggle theme">
          <i class="fa-solid fa-moon"></i><span class="hidden sm:inline">Dark</span>
        </button>

        <input id="search" type="text" placeholder="Search modules…  ( / or Ctrl+K )"
               oninput="filterCards()"
               class="px-3 py-2 rounded-lg text-gray-800 border border-gray-200 w-64 max-w-full" />
      </span>
    </div>
  </nav>

  <!-- Hero -->
  <header class="container mx-auto px-4 py-10">
    <div class="rounded-2xl border border-gray-200 shadow bg-white p-8 relative overflow-hidden">
      <div class="absolute -right-16 -top-16 h-64 w-64 rounded-full bg-blue-100 opacity-70"></div>
      <div class="absolute -left-20 -bottom-20 h-72 w-72 rounded-full bg-indigo-100 opacity-70"></div>

      <div class="relative">
        <div class="flex flex-wrap items-center gap-3 mb-4">
          <span class="badge bg-blue-100 text-blue-700">Offline-friendly</span>
          <span class="badge bg-gray-100 text-gray-700">Print-ready documents</span>
          <span class="badge bg-green-100 text-green-700">Fast workflows</span>
        </div>

        <h1 class="text-3xl sm:text-4xl font-black text-gray-800 mb-3">Welcome to Easy Suite</h1>
        <p class="text-gray-600 text-lg max-w-3xl">
          Launch any module in seconds — Quotes, Invoices, Orders, Receipts, Statements and more.
          Use search, pin your favourites, and pick up where you left off.
        </p>

        <div class="mt-6 flex flex-wrap gap-3">
          <a href="easy-quote.html" onclick="addRecent('quote')" class="px-5 py-3 rounded-xl bg-blue-600 text-white font-black hover:bg-blue-700">
            <i class="fa-solid fa-plus"></i> New Quote
          </a>
          <a href="easy-invoice.html" onclick="addRecent('invoice')" class="px-5 py-3 rounded-xl bg-green-600 text-white font-black hover:bg-green-700">
            <i class="fa-solid fa-plus"></i> New Invoice
          </a>
          <a href="easy-receipt.html" onclick="addRecent('receipt')" class="px-5 py-3 rounded-xl bg-teal-600 text-white font-black hover:bg-teal-700">
            <i class="fa-solid fa-plus"></i> New Receipt
          </a>

          <span class="ml-auto inline-flex items-center gap-2 text-gray-600 font-extrabold">
            Tip: press <span class="px-2 py-1 rounded-lg border border-gray-200 bg-gray-50">/</span> to search
          </span>
        </div>
      </div>
    </div>
  </header>

  <main class="container mx-auto px-4 pb-12">
    <!-- Pinned -->
    <section id="pinnedWrap" class="hidden mb-10">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-2xl font-black text-gray-800">Pinned</h2>
        <span class="text-gray-600 font-extrabold">Pin modules using the thumbtack icon</span>
      </div>
      <div id="pinnedGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
    </section>

    <!-- Recent -->
    <section id="recentWrap" class="hidden mb-10">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-2xl font-black text-gray-800">Recently used</h2>
        <button class="px-3 py-2 rounded-lg border border-gray-200 font-extrabold hover:bg-gray-50"
                onclick="localStorage.removeItem('easySuite.recentModules'); renderAll();">
          Clear
        </button>
      </div>
      <div id="recentList" class="flex flex-wrap gap-3"></div>
    </section>

    <!-- Tags -->
    <section class="mb-6">
      <h2 class="text-xl font-black text-gray-800 mb-3">Filter by tags</h2>
      <div id="tagBar" class="flex flex-wrap gap-2"></div>
    </section>

    <!-- Modules -->
    <section>
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-2xl font-black text-gray-800">All modules</h2>
        <span class="text-gray-600 font-extrabold">Search title, description, or tags</span>
      </div>

      <div id="modulesGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
    </section>

    <footer class="mt-12 text-center text-gray-600 font-extrabold">
      Easy Suite • Local-first tools • Designed for speed
    </footer>
  </main>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js" defer></script>
</body>
</html>
